{"ast":null,"code":"import _objectSpread from \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/src/components/Order/Booking.js\";\nimport React, { useState, useContext } from \"react\";\nimport DatePicker from \"./DatePicker\";\nimport BookingDetails from \"./BookingDetails\";\nimport { UserCookie } from '../../hooks/UserCookie';\nimport axios from \"axios\";\nexport default function Booking(props) {\n  var _useContext = useContext(UserCookie),\n      state = _useContext.state,\n      setState = _useContext.setState,\n      cookie = _useContext.cookie;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedDate = _useState2[0],\n      setSelectedDate = _useState2[1];\n\n  var bookingGig = function bookingGig() {\n    var order = {\n      gig_id: props.gig.id,\n      client_id: cookie.user.id,\n      rating: 0,\n      review: \"\",\n      status: \"pending\",\n      order_date: selectedDate,\n      finished_date: \"2100-01-01 04:29:00\"\n    };\n    props.transition(\"PENDING\");\n    axios.put('/api/orders', order).then(function (res) {\n      props.transition(\"SUCCESS\");\n      var orders = [].concat(_toConsumableArray(state.orders), [res.data]);\n      setState(function (prev) {\n        return _objectSpread({}, prev, {\n          orders: orders\n        });\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BookingDetails, {\n    gig: props.gig,\n    selectedDate: selectedDate,\n    setSelectedDate: setSelectedDate,\n    onclick: bookingGig,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    selectedDate: selectedDate,\n    setSelectedDate: setSelectedDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/src/components/Order/Booking.js"],"names":["React","useState","useContext","DatePicker","BookingDetails","UserCookie","axios","Booking","props","state","setState","cookie","selectedDate","setSelectedDate","bookingGig","order","gig_id","gig","id","client_id","user","rating","review","status","order_date","finished_date","transition","put","then","res","orders","data","prev"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA0C,OAA1C;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAAQC,UAAR,QAAyB,wBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAAA,oBACHN,UAAU,CAACG,UAAD,CADP;AAAA,MAC9BI,KAD8B,eAC9BA,KAD8B;AAAA,MACvBC,QADuB,eACvBA,QADuB;AAAA,MACbC,MADa,eACbA,MADa;;AAAA,kBAEGV,QAAQ,CAAC,IAAD,CAFX;AAAA;AAAA,MAE9BW,YAF8B;AAAA,MAEhBC,eAFgB;;AAKrC,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AAEvB,QAAMC,KAAK,GAAG;AACZC,MAAAA,MAAM,EAAER,KAAK,CAACS,GAAN,CAAUC,EADN;AAEZC,MAAAA,SAAS,EAAER,MAAM,CAACS,IAAP,CAAYF,EAFX;AAGZG,MAAAA,MAAM,EAAE,CAHI;AAIZC,MAAAA,MAAM,EAAE,EAJI;AAKZC,MAAAA,MAAM,EAAE,SALI;AAMZC,MAAAA,UAAU,EAAEZ,YANA;AAOZa,MAAAA,aAAa,EAAE;AAPH,KAAd;AASAjB,IAAAA,KAAK,CAACkB,UAAN,CAAiB,SAAjB;AACApB,IAAAA,KAAK,CAACqB,GAAN,CAAU,aAAV,EAAyBZ,KAAzB,EACCa,IADD,CACM,UAAAC,GAAG,EAAI;AACXrB,MAAAA,KAAK,CAACkB,UAAN,CAAiB,SAAjB;AACA,UAAMI,MAAM,gCAAOrB,KAAK,CAACqB,MAAb,IAAqBD,GAAG,CAACE,IAAzB,EAAZ;AACArB,MAAAA,QAAQ,CAAC,UAAAsB,IAAI;AAAA,iCACRA,IADQ;AACFF,UAAAA,MAAM,EAANA;AADE;AAAA,OAAL,CAAR;AAID,KARD;AASD,GArBD;;AAsBA,sBACE,uDACE,oBAAC,cAAD;AAAgB,IAAA,GAAG,EAAEtB,KAAK,CAACS,GAA3B;AAAgC,IAAA,YAAY,EAAEL,YAA9C;AAA4D,IAAA,eAAe,EAAEC,eAA7E;AAA8F,IAAA,OAAO,EAAEC,UAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,UAAD;AAAY,IAAA,YAAY,EAAEF,YAA1B;AAAwC,IAAA,eAAe,EAAEC,eAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD","sourcesContent":["import React, {useState, useContext} from \"react\";\nimport DatePicker from \"./DatePicker\";\nimport BookingDetails from \"./BookingDetails\";\nimport {UserCookie} from '../../hooks/UserCookie';\nimport axios from \"axios\";\n\nexport default function Booking(props) {\n  const {state, setState, cookie} = useContext(UserCookie);\n  const [selectedDate, setSelectedDate] = useState(null);\n  \n\n  const bookingGig = () => {\n    \n    const order = {\n      gig_id: props.gig.id,\n      client_id: cookie.user.id,\n      rating: 0,\n      review: \"\",\n      status: \"pending\",\n      order_date: selectedDate,\n      finished_date: \"2100-01-01 04:29:00\"\n    }\n    props.transition(\"PENDING\");\n    axios.put('/api/orders', order)\n    .then(res => {\n      props.transition(\"SUCCESS\");\n      const orders = [...state.orders, res.data];\n      setState(prev => ({\n        ...prev, orders\n      }));\n      \n    });\n  };\n  return (\n    <>\n      <BookingDetails gig={props.gig} selectedDate={selectedDate} setSelectedDate={setSelectedDate} onclick={bookingGig}/>\n      <DatePicker selectedDate={selectedDate} setSelectedDate={setSelectedDate}/>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}