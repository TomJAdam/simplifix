{"ast":null,"code":"import _slicedToArray from \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/src/components/GigPage.js\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport GigHeader from \"./GigHeader\";\nimport GigDetails from \"./GigDetails\";\nimport Grid from \"@material-ui/core/Grid\";\nimport GoogleMap from \"./GoogleMap\";\nimport ContactCard from \"./ContactCard\";\nimport Booking from './Order/Booking';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { START, SELECT, PENDING, SUCCESS, FAILED } from \"../helpers/mode\";\nimport UseBookingMode from \"../hooks/UseBookingMode\";\nimport PlaceHolder from './Order/PlaceHolder';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      paddingTop: \"1rem\"\n    },\n    card: {\n      borderRadius: \"8px\",\n      boxShadow: \"0px 2px 5px 0.5px #E3E3E3\"\n    },\n    map: {\n      maxWidth: 250,\n      maxHeight: 300,\n      backgroundColor: \"blue\"\n    }\n  };\n});\nexport default function GigPage() {\n  var classes = useStyles();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      gig = _useState2[0],\n      setGig = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      contractor = _useState4[0],\n      setContractor = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      coords = _useState6[0],\n      setCoords = _useState6[1];\n\n  var params = useParams();\n\n  var _UseBookingMode = UseBookingMode(START),\n      mode = _UseBookingMode.mode,\n      transition = _UseBookingMode.transition,\n      back = _UseBookingMode.back;\n\n  var getCoords = function getCoords(address) {\n    var splitAddy = address.split(\" \");\n    var searchString = splitAddy.join(\"+\");\n    console.log('api key in gigpage', process.env.REACT_APP_GOOGLE_API);\n    axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(searchString, \"&key=\").concat(process.env.REACT_APP_GOOGLE_API)).then(function (res) {\n      console.log('results', res.data.results); // return setCoords(res.data.results[0].geometry.location);\n    });\n  };\n\n  useEffect(function () {\n    axios.get(\"/api/gigs/\".concat(params.gig_id)).then(function (response) {\n      setGig(response.data[0]);\n      var id = response.data[0].contractor_id;\n      return axios(\"/api/users/\".concat(id));\n    }).then(function (response) {\n      setContractor(response.data[0]);\n      var userAddy = \"\".concat(response.data[0].address, \", \").concat(response.data[0].city, \", \").concat(response.data[0].province);\n      getCoords(userAddy);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(GigHeader, {\n    first: contractor.first_name,\n    last: contractor.last_name,\n    title: gig.title,\n    price: gig.price,\n    image: gig.photo_one,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), mode === \"START\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    justify: \"center\",\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GigDetails, {\n    bio: contractor.bio,\n    education: contractor.education,\n    description: gig.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ContactCard, {\n    city: contractor.city,\n    phone: contractor.phone_number,\n    email: contractor.email,\n    first_name: contractor.first_name,\n    last_name: contractor.last_name,\n    contractor_id: contractor.id,\n    gig_id: gig.id,\n    onBooking: function onBooking() {\n      return transition(\"SELECT\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GoogleMap, {\n    coords: coords,\n    title: gig.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }))))), mode === \"SELECT\" && /*#__PURE__*/React.createElement(Booking, {\n    transition: transition,\n    back: back,\n    gig: gig,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }), mode === \"PENDING\" && /*#__PURE__*/React.createElement(PlaceHolder, {\n    gig: gig,\n    contractor: contractor,\n    mode: mode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 30\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/shadeemerhi/lighthouse/final/react-express-boilerplate/react-front-end/src/components/GigPage.js"],"names":["React","useEffect","useState","useCallback","useParams","axios","GigHeader","GigDetails","Grid","GoogleMap","ContactCard","Booking","makeStyles","START","SELECT","PENDING","SUCCESS","FAILED","UseBookingMode","PlaceHolder","useStyles","theme","root","flexGrow","paddingTop","card","borderRadius","boxShadow","map","maxWidth","maxHeight","backgroundColor","GigPage","classes","gig","setGig","contractor","setContractor","coords","setCoords","params","mode","transition","back","getCoords","address","splitAddy","split","searchString","join","console","log","process","env","REACT_APP_GOOGLE_API","get","then","res","data","results","gig_id","response","id","contractor_id","userAddy","city","province","first_name","last_name","title","price","photo_one","bio","education","description","phone_number","email"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport GigHeader from \"./GigHeader\";\nimport GigDetails from \"./GigDetails\";\nimport Grid from \"@material-ui/core/Grid\";\nimport GoogleMap from \"./GoogleMap\";\nimport ContactCard from \"./ContactCard\";\nimport Booking from './Order/Booking';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {START, SELECT, PENDING, SUCCESS, FAILED} from \"../helpers/mode\";\nimport UseBookingMode from \"../hooks/UseBookingMode\";\nimport PlaceHolder from './Order/PlaceHolder'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    paddingTop: \"1rem\",\n  },\n\n  card: {\n    borderRadius: \"8px\",\n    boxShadow: \"0px 2px 5px 0.5px #E3E3E3\",\n  },\n  map: {\n    maxWidth: 250,\n    maxHeight: 300,\n    backgroundColor: \"blue\",\n  },\n}));\n\nexport default function GigPage() {\n  const classes = useStyles();\n\n  const [gig, setGig] = useState({});\n  const [contractor, setContractor] = useState({});\n  const [coords, setCoords] = useState({});\n\n  const params = useParams();\n\n  const {mode, transition, back} = UseBookingMode(START);\n  const getCoords = (address) => {\n    const splitAddy = address.split(\" \");\n    let searchString = splitAddy.join(\"+\");\n    console.log('api key in gigpage', process.env.REACT_APP_GOOGLE_API);\n    axios\n      .get(\n        `https://maps.googleapis.com/maps/api/geocode/json?address=${searchString}&key=${process.env.REACT_APP_GOOGLE_API}`\n      )\n      .then((res) => {\n        console.log('results', res.data.results)\n        // return setCoords(res.data.results[0].geometry.location);\n      });\n  };\n\n  useEffect(() => {\n    axios\n      .get(`/api/gigs/${params.gig_id}`)\n      .then((response) => {\n        setGig(response.data[0]);\n        const id = response.data[0].contractor_id;\n        return axios(`/api/users/${id}`);\n      })\n      .then((response) => {\n        setContractor(response.data[0]);\n        const userAddy = `${response.data[0].address}, ${response.data[0].city}, ${response.data[0].province}`;\n        getCoords(userAddy);\n      });\n  }, []);\n\n  return (\n    <div>\n      <GigHeader\n        first={contractor.first_name}\n        last={contractor.last_name}\n        title={gig.title}\n        price={gig.price}\n        image={gig.photo_one}\n      />\n      {mode === \"START\" &&\n      <div className={classes.root}>\n        <Grid container spacing={3} justify=\"center\" className={classes.root}>\n          <Grid item sm={8}>\n            <GigDetails\n              bio={contractor.bio}\n              education={contractor.education}\n              description={gig.description}\n            />\n          </Grid>\n          <Grid item sm={3}>\n            <ContactCard\n              city={contractor.city}\n              phone={contractor.phone_number}\n              email={contractor.email}\n              first_name={contractor.first_name}\n              last_name={contractor.last_name}\n              contractor_id={contractor.id}\n              gig_id={gig.id}\n              onBooking={() => transition(\"SELECT\")}\n            />\n            <Grid item sm={3}>\n              <GoogleMap coords={coords} title={gig.title} />\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>}\n      {mode === \"SELECT\" && <Booking transition={transition} back={back} gig={gig}/>}\n      {mode === \"PENDING\" && <PlaceHolder gig={gig} contractor={contractor} mode={mode}/>} \n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}